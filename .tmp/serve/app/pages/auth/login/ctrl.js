(function() {
  var Ctrl;

  Ctrl = function($scope, $state, growl, Session) {
    $scope.creds = {
      email: "",
      password: ""
    };
    $scope.uiState = {
      loading: false
    };
    return $scope.login = function(form) {
      $scope.uiState.loading = true;
      form.$submitted = true;
      if (form.$valid) {
        return Session.login({
          user: $scope.creds
        }).$promise.then(function(data) {
          Session.setSession(data);
          growl.success(MESSAGES.LOGIN_SUCCESS);
          return $state.go("account.settings");
        })["finally"](function() {
          return $scope.uiState.loading = false;
        });
      }
    };
  };

  angular.module('client').controller('LoginCtrl', Ctrl);

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnZXMvYXV0aC9sb2dpbi9jdHJsLmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIiwic291cmNlcyI6WyJwYWdlcy9hdXRoL2xvZ2luL2N0cmwuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsTUFBQTs7RUFBQSxJQUFBLEdBQU8sU0FBQyxNQUFELEVBQVEsTUFBUixFQUFlLEtBQWYsRUFBcUIsT0FBckI7SUFFTCxNQUFNLENBQUMsS0FBUCxHQUNFO01BQUEsS0FBQSxFQUFPLEVBQVA7TUFDQSxRQUFBLEVBQVUsRUFEVjs7SUFHRixNQUFNLENBQUMsT0FBUCxHQUNFO01BQUEsT0FBQSxFQUFTLEtBQVQ7O1dBRUYsTUFBTSxDQUFDLEtBQVAsR0FBYyxTQUFDLElBQUQ7TUFDWixNQUFNLENBQUMsT0FBTyxDQUFDLE9BQWYsR0FBeUI7TUFDekIsSUFBSSxDQUFDLFVBQUwsR0FBa0I7TUFDbEIsSUFBRyxJQUFJLENBQUMsTUFBUjtlQUNFLE9BQU8sQ0FBQyxLQUFSLENBQWM7VUFBQSxJQUFBLEVBQU0sTUFBTSxDQUFDLEtBQWI7U0FBZCxDQUFpQyxDQUFDLFFBQ2hDLENBQUMsSUFESCxDQUNRLFNBQUMsSUFBRDtVQUNKLE9BQU8sQ0FBQyxVQUFSLENBQW1CLElBQW5CO1VBQ0EsS0FBSyxDQUFDLE9BQU4sQ0FBYyxRQUFRLENBQUMsYUFBdkI7aUJBQ0EsTUFBTSxDQUFDLEVBQVAsQ0FBVSxrQkFBVjtRQUhJLENBRFIsQ0FLRSxFQUFDLE9BQUQsRUFMRixDQUtXLFNBQUE7aUJBQ1AsTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFmLEdBQXlCO1FBRGxCLENBTFgsRUFERjs7SUFIWTtFQVRUOztFQXNCUCxPQUFPLENBQUMsTUFBUixDQUFlLFFBQWYsQ0FBd0IsQ0FBQyxVQUF6QixDQUFvQyxXQUFwQyxFQUFpRCxJQUFqRDtBQXRCQSIsInNvdXJjZXNDb250ZW50IjpbIkN0cmwgPSAoJHNjb3BlLCRzdGF0ZSxncm93bCxTZXNzaW9uKS0+XHJcblxyXG4gICRzY29wZS5jcmVkcyA9XHJcbiAgICBlbWFpbDogXCJcIlxyXG4gICAgcGFzc3dvcmQ6IFwiXCJcclxuXHJcbiAgJHNjb3BlLnVpU3RhdGUgPVxyXG4gICAgbG9hZGluZzogZmFsc2VcclxuXHJcbiAgJHNjb3BlLmxvZ2luID0oZm9ybSktPlxyXG4gICAgJHNjb3BlLnVpU3RhdGUubG9hZGluZyA9IHRydWVcclxuICAgIGZvcm0uJHN1Ym1pdHRlZCA9IHRydWVcclxuICAgIGlmIGZvcm0uJHZhbGlkXHJcbiAgICAgIFNlc3Npb24ubG9naW4odXNlcjogJHNjb3BlLmNyZWRzKS4kcHJvbWlzZVxyXG4gICAgICAgIC50aGVuIChkYXRhKSAtPlxyXG4gICAgICAgICAgU2Vzc2lvbi5zZXRTZXNzaW9uKGRhdGEpXHJcbiAgICAgICAgICBncm93bC5zdWNjZXNzKE1FU1NBR0VTLkxPR0lOX1NVQ0NFU1MpXHJcbiAgICAgICAgICAkc3RhdGUuZ28oXCJhY2NvdW50LnNldHRpbmdzXCIpXHJcbiAgICAgICAgLmZpbmFsbHkgLT5cclxuICAgICAgICAgICRzY29wZS51aVN0YXRlLmxvYWRpbmcgPSBmYWxzZVxyXG5cclxuXHJcbmFuZ3VsYXIubW9kdWxlKCdjbGllbnQnKS5jb250cm9sbGVyKCdMb2dpbkN0cmwnLCBDdHJsKVxyXG4iXX0=
