(function() {
  var Ctrl;

  Ctrl = function($scope, $state, growl, Session, Auth) {
    $scope.creds = {
      email: "",
      password: ""
    };
    $scope.uiState = {
      loading: false
    };
    return $scope.login = function(form) {
      $scope.uiState.loading = true;
      form.$submitted = true;
      if (form.$valid) {
        return Session.login({
          user: $scope.creds
        }).$promise.then(function(data) {
          Auth.setUser(data);
          Session.setSession(data);
          growl.success(MESSAGES.LOGIN_SUCCESS);
          return $state.go("account.settings");
        })["finally"](function() {
          return $scope.uiState.loading = false;
        });
      }
    };
  };

  angular.module('client').controller('LoginCtrl', Ctrl);

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnZXMvYXV0aC9sb2dpbi9jdHJsLmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIiwic291cmNlcyI6WyJwYWdlcy9hdXRoL2xvZ2luL2N0cmwuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQUEsTUFBQTs7RUFBQSxJQUFBLEdBQU8sU0FBQyxNQUFELEVBQVEsTUFBUixFQUFlLEtBQWYsRUFBcUIsT0FBckIsRUFBNkIsSUFBN0I7SUFFTCxNQUFNLENBQUMsS0FBUCxHQUNFO01BQUEsS0FBQSxFQUFPLEVBQVA7TUFDQSxRQUFBLEVBQVUsRUFEVjs7SUFHRixNQUFNLENBQUMsT0FBUCxHQUNFO01BQUEsT0FBQSxFQUFTLEtBQVQ7O1dBRUYsTUFBTSxDQUFDLEtBQVAsR0FBYyxTQUFDLElBQUQ7TUFDWixNQUFNLENBQUMsT0FBTyxDQUFDLE9BQWYsR0FBeUI7TUFDekIsSUFBSSxDQUFDLFVBQUwsR0FBa0I7TUFDbEIsSUFBRyxJQUFJLENBQUMsTUFBUjtlQUNFLE9BQU8sQ0FBQyxLQUFSLENBQWM7VUFBQSxJQUFBLEVBQU0sTUFBTSxDQUFDLEtBQWI7U0FBZCxDQUFpQyxDQUFDLFFBQ2hDLENBQUMsSUFESCxDQUNRLFNBQUMsSUFBRDtVQUNKLElBQUksQ0FBQyxPQUFMLENBQWEsSUFBYjtVQUNBLE9BQU8sQ0FBQyxVQUFSLENBQW1CLElBQW5CO1VBQ0EsS0FBSyxDQUFDLE9BQU4sQ0FBYyxRQUFRLENBQUMsYUFBdkI7aUJBQ0EsTUFBTSxDQUFDLEVBQVAsQ0FBVSxrQkFBVjtRQUpJLENBRFIsQ0FNRSxFQUFDLE9BQUQsRUFORixDQU1XLFNBQUE7aUJBQ1AsTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFmLEdBQXlCO1FBRGxCLENBTlgsRUFERjs7SUFIWTtFQVRUOztFQXVCUCxPQUFPLENBQUMsTUFBUixDQUFlLFFBQWYsQ0FBd0IsQ0FBQyxVQUF6QixDQUFvQyxXQUFwQyxFQUFpRCxJQUFqRDtBQXZCQSIsInNvdXJjZXNDb250ZW50IjpbIkN0cmwgPSAoJHNjb3BlLCRzdGF0ZSxncm93bCxTZXNzaW9uLEF1dGgpLT5cclxuXHJcbiAgJHNjb3BlLmNyZWRzID1cclxuICAgIGVtYWlsOiBcIlwiXHJcbiAgICBwYXNzd29yZDogXCJcIlxyXG5cclxuICAkc2NvcGUudWlTdGF0ZSA9XHJcbiAgICBsb2FkaW5nOiBmYWxzZVxyXG5cclxuICAkc2NvcGUubG9naW4gPShmb3JtKS0+XHJcbiAgICAkc2NvcGUudWlTdGF0ZS5sb2FkaW5nID0gdHJ1ZVxyXG4gICAgZm9ybS4kc3VibWl0dGVkID0gdHJ1ZVxyXG4gICAgaWYgZm9ybS4kdmFsaWRcclxuICAgICAgU2Vzc2lvbi5sb2dpbih1c2VyOiAkc2NvcGUuY3JlZHMpLiRwcm9taXNlXHJcbiAgICAgICAgLnRoZW4gKGRhdGEpIC0+XHJcbiAgICAgICAgICBBdXRoLnNldFVzZXIoZGF0YSlcclxuICAgICAgICAgIFNlc3Npb24uc2V0U2Vzc2lvbihkYXRhKVxyXG4gICAgICAgICAgZ3Jvd2wuc3VjY2VzcyhNRVNTQUdFUy5MT0dJTl9TVUNDRVNTKVxyXG4gICAgICAgICAgJHN0YXRlLmdvKFwiYWNjb3VudC5zZXR0aW5nc1wiKVxyXG4gICAgICAgIC5maW5hbGx5IC0+XHJcbiAgICAgICAgICAkc2NvcGUudWlTdGF0ZS5sb2FkaW5nID0gZmFsc2VcclxuXHJcblxyXG5hbmd1bGFyLm1vZHVsZSgnY2xpZW50JykuY29udHJvbGxlcignTG9naW5DdHJsJywgQ3RybClcclxuIl19
